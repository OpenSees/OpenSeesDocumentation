

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.2.4.4. Relative Norm Unbalance &mdash; OpenSees Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="RelativeNormDispIncr.html" />
    <link rel="prev" title="3.2.4.3. Energy Increment" href="NormEnergyIncr.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/OpenSeesLogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Applications for Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../interpreters.html">1. OpenSees Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">2. Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../userManual.html">3. Command Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../modelCommands.html">3.1. Modelling Commands</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../analysisCommands.html">3.2. Analysis Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../constraints.html">3.2.1. constraints Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../numberer.html">3.2.2. numberer Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system.html">3.2.3. system Command</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../test.html">3.2.4. test Command</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="NormUnbalance.html">3.2.4.1. Norm Unbalance</a></li>
<li class="toctree-l4"><a class="reference internal" href="NormDispIncr.html">3.2.4.2. Norm Displacement Increment</a></li>
<li class="toctree-l4"><a class="reference internal" href="NormEnergyIncr.html">3.2.4.3. Energy Increment</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.2.4.4. Relative Norm Unbalance</a></li>
<li class="toctree-l4"><a class="reference internal" href="RelativeEnergyIncr.html">3.2.4.5. Relative Energy Increment Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="TotalRelativeNormDisplacementIncrement.html">3.2.4.6. Total Relative Norm Displacement Increment</a></li>
<li class="toctree-l4"><a class="reference internal" href="FixedNumberIterations.html">3.2.4.7. Fixed Number Iterations Test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../algorithm.html">3.2.5. algorithm Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../integrator.html">3.2.6. integrator Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../analysis.html">3.2.7. analysis Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../analyze.html">3.2.8. analyze Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../eigen.html">3.2.9. eigen Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modalProperties.html">3.2.10. modalProperties Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../responseSpectrumAnalysis.html">3.2.11. responseSpectrumAnalysis Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../outputCommands.html">3.3. Output Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../materialCommands.html">3.4. Material Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../miscCommands.html">3.5. Misc. Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../userExamples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../messageBoard.html">5. Questions, Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/license.html">6. Copyright and License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework for Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/sourceCode.html">1. Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/build.html">2. Building Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/references.html">3. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/extend.html">4. Extending Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/contribute.html">5. Contributing Code &amp; Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/issues.html">6. Issues</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">OpenSees Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../userManual.html"><span class="section-number">3. </span>Command Manual</a> &raquo;</li>
        
          <li><a href="../../analysisCommands.html"><span class="section-number">3.2. </span>Analysis Commands</a> &raquo;</li>
        
          <li><a href="../test.html"><span class="section-number">3.2.4. </span>test Command</a> &raquo;</li>
        
      <li><span class="section-number">3.2.4.4. </span>Relative Norm Unbalance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/user/manual/analysis/test/RelativeNormUnbalance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="relative-norm-unbalance">
<span id="relativenormunbalance"></span><h1><span class="section-number">3.2.4.4. </span>Relative Norm Unbalance<a class="headerlink" href="#relative-norm-unbalance" title="Permalink to this headline">Â¶</a></h1>
<p>This command is used to construct a convergence test which uses the norms of the right hand side of the matrix equation, i.e. <span class="math notranslate nohighlight">\(b\)</span> vector in <span class="math notranslate nohighlight">\(Ax=b\)</span>, to determine if convergence has been reached. It uses the ratio of the current norm to the first norm, i.e. :math:<a href="#id1"><span class="problematic" id="id2">`</span></a>frac{sqrt({b_i}^T{b_i})}{sqrt({b_1}^T{b_1})}. What the right-hand-side of the matrix equation is depends on integrator and constraint handler chosen. Usually, though not always, it is equal to the unbalanced forces in the system. The command to create a RelativeNormUnbalance test is the following:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">test</span> <span class="pre">RelativeNormUnbalance</span> <span class="pre">$tol</span> <span class="pre">$iter</span> <span class="pre">&lt;$pFlag&gt;</span> <span class="pre">&lt;$nType&gt;</span></span></dt>
<dd></dd></dl>

<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$tol</p></td>
<td><p><em>float</em></p></td>
<td><p>the tolerance criteria used to check for convergence</p></td>
</tr>
<tr class="row-odd"><td><p>$iter</p></td>
<td><p><em>integer</em></p></td>
<td><p>the max number of iterations to check before returning failure condition</p></td>
</tr>
<tr class="row-even"><td><p>$pFlag</p></td>
<td><p><em>integer</em></p></td>
<td><blockquote>
<div><div class="line-block">
<div class="line">print flag (optional: default is 0) valid options:</div>
<div class="line">0 print nothing</div>
<div class="line">1 print information on norms each time test() is invoked</div>
<div class="line">2 print information on norms and number of iterations at end of successful test</div>
<div class="line">4 at each step it will print the norms and also the &lt;math&gt;Delta U&lt;/math&gt; and &lt;math&gt;R(U)&lt;/math&gt; vectors.</div>
<div class="line">5 if it fails to converge at end of $numIter it will print an error message BUT RETURN A SUCCESSFUL test.</div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>$nType</p></td>
<td><p><em>integer</em></p></td>
<td><p>type of norm (optional: default is 2 (0 = max-norm 1 = 1-norm 2 = 2-norm â¦))</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The convergence test compares the current norm of the unbalance with the norm of the first step to determine if convergence has been achieved. As a consequence it will always take at least two steps to achieve convergence.</p>
<p>If numerically the solution has a very small unbalance at the first step, this may mean that the test may never indicate success even though the solution had indeed converged to a solution. This is because machine precision and numerical round-off limit how small the unbalance can become.</p>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example:</p>
<p>The following examples demonstrate the command to create a RelativeNormUnbalance test which allows 10 iterations till failure with a 2-norm in the <span class="math notranslate nohighlight">\(b\)</span> vector, i.e. <span class="math notranslate nohighlight">\(\sqrt(b^T b)\)</span> of <strong>1.0e-2</strong>.</p>
<ol class="arabic simple">
<li><p><strong>Tcl Code</strong></p></li>
</ol>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="nv">test</span> RelativeNormUnbalance <span class="mf">1.0</span>e-2  <span class="mi">10</span> <span class="mi">2</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Python Code</strong></p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">test</span><span class="p">(</span><span class="s1">&#39;RelativeNormUnbalance&#39;</span><span class="p">,</span> <span class="mf">1.0e-2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Code Developed by: <strong>fmk</strong></p>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-2431545-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>
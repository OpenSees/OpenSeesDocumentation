

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3.1.3.16. ASDAbsorbingBoundary Element (2D and 3D) &mdash; OpenSees Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="3.1.4. SP_Constraint Commands" href="../spConstraints.html" />
    <link rel="prev" title="3.1.3.15. ASDEmbeddedNode Element" href="ASDEmbeddedNodeElement.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/OpenSeesLogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Applications for Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../interpreters.html">1. OpenSees Interpreters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">2. Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../userManual.html">3. Command Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../modelCommands.html">3.1. Modelling Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../model.html">3.1.1. Model Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../node.html">3.1.2. Node Command</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../element.html">3.1.3. Element Command</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="zeroLength.html">3.1.3.1. ZeroLength Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="zeroLengthSection.html">3.1.3.2. ZeroLength Section Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="zeroLengthND.html">3.1.3.3. ZeroLengthND Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="zeroLengthContactASDimplex.html">3.1.3.4. ZeroLengthContactASDimplex Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="elasticBeamColumn.html">3.1.3.5. Elastic Beam Column Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="gradientInelasticBeamColumn.html">3.1.3.6. Gradient Inelastic (GI) Beam-Column Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispBeamColumnAsym.html">3.1.3.7. Displacement-Based Beam Element (Asymmetric Sections)</a></li>
<li class="toctree-l4"><a class="reference internal" href="mixedBeamColumnAsym.html">3.1.3.8. Mixed Beam Element (Asymmetric Sections)</a></li>
<li class="toctree-l4"><a class="reference internal" href="ASDShellQ4.html">3.1.3.9. ASDShellQ4 Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="Quad.html">3.1.3.10. Quadrilateral Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="SSPquad.html">3.1.3.11. SSPquad Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="stdBrick.html">3.1.3.12. stdBrick Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="bbarBrick.html">3.1.3.13. bbarBrick Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="SSPbrick.html">3.1.3.14. SSPbrick Element</a></li>
<li class="toctree-l4"><a class="reference internal" href="ASDEmbeddedNodeElement.html">3.1.3.15. ASDEmbeddedNode Element</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.1.3.16. ASDAbsorbingBoundary Element (2D and 3D)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../spConstraints.html">3.1.4. SP_Constraint Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mpConstraints.html">3.1.5. MP_Constraint Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../timeSeries.html">3.1.6. Time Series Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pattern.html">3.1.7. Pattern Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../analysisCommands.html">3.2. Analysis Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../outputCommands.html">3.3. Output Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../materialCommands.html">3.4. Material Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../miscCommands.html">3.5. Misc. Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../userExamples.html">4. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../messageBoard.html">5. Questions, Bugs &amp; Feauture Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/license.html">6. Copyright and License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework for Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/sourceCode.html">1. Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/build.html">2. Building Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/references.html">3. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/extend.html">4. Extending Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/contribute.html">5. Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/issues.html">6. Issues</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">OpenSees Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../userManual.html"><span class="section-number">3. </span>Command Manual</a> &raquo;</li>
        
          <li><a href="../../modelCommands.html"><span class="section-number">3.1. </span>Modelling Commands</a> &raquo;</li>
        
          <li><a href="../element.html"><span class="section-number">3.1.3. </span>Element Command</a> &raquo;</li>
        
      <li><span class="section-number">3.1.3.16. </span>ASDAbsorbingBoundary Element (2D and 3D)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/user/manual/model/elements/ASDAbsorbingBoundary.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="asdabsorbingboundary-element-2d-and-3d">
<span id="asdabsorbingboundary"></span><h1><span class="section-number">3.1.3.16. </span>ASDAbsorbingBoundary Element (2D and 3D)<a class="headerlink" href="#asdabsorbingboundary-element-2d-and-3d" title="Permalink to this headline">¶</a></h1>
<div class="align-center figure">
<img alt="../../../../_images/ASDAbsorbingBoundary_Video.gif" src="../../../../_images/ASDAbsorbingBoundary_Video.gif" />
</div>
<div class="line-block">
<div class="line">This command is used to construct an ASDAbsorbingBoundary2D or ASDAbsorbingBoundary3D  object.</div>
<div class="line">The ASDAbsorbingBoundary2D is a 4-node quadrilateral element, while the ASDAbsorbingBoundary3D is a 8-node hexaedron element.</div>
<div class="line">This elements can be used as an extra layer at the boundaries of a soil domain to avoid wave reflections which typically arise with fixed boundaries.</div>
</div>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">element</span> <span class="pre">ASDAbsorbingBoundary2D</span> <span class="pre">$tag</span> <span class="pre">$n1</span> <span class="pre">$n2</span> <span class="pre">$n3</span> <span class="pre">$n4</span> <span class="pre">$G</span> <span class="pre">$v</span> <span class="pre">$rho</span> <span class="pre">$thickness</span> <span class="pre">$btype</span> <span class="pre">&lt;-fx</span> <span class="pre">$tsxTag&gt;</span> <span class="pre">&lt;-fy</span> <span class="pre">$tsyTag&gt;</span></span></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">element</span> <span class="pre">ASDAbsorbingBoundary3D</span> <span class="pre">$tag</span> <span class="pre">$n1</span> <span class="pre">$n2</span> <span class="pre">$n3</span> <span class="pre">$n4</span> <span class="pre">$n5</span> <span class="pre">$n6</span> <span class="pre">$n7</span> <span class="pre">$n8</span> <span class="pre">$G</span> <span class="pre">$v</span> <span class="pre">$rho</span> <span class="pre">$btype</span> <span class="pre">&lt;-fx</span> <span class="pre">$tsxTag&gt;</span> <span class="pre">&lt;-fy</span> <span class="pre">$tsyTag&gt;</span> <span class="pre">&lt;-fz</span> <span class="pre">$tszTag&gt;</span></span></dt>
<dd></dd></dl>

<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$tag</p></td>
<td><p><em>integer</em></p></td>
<td><p>unique integer tag identifying element object.</p></td>
</tr>
<tr class="row-odd"><td><p>$n1 $n2 $n3 $n4 $n5 $n6 $n7 $n8</p></td>
<td><p>4 (or 8) <em>integer</em></p></td>
<td><p>the 4 (or 8) nodes defining the element.</p></td>
</tr>
<tr class="row-even"><td><p>$G</p></td>
<td><p><em>float</em></p></td>
<td><p>the shear modulus.</p></td>
</tr>
<tr class="row-odd"><td><p>$v</p></td>
<td><p><em>float</em></p></td>
<td><p>the Poisson’s ratio.</p></td>
</tr>
<tr class="row-even"><td><p>$rho</p></td>
<td><p><em>float</em></p></td>
<td><p>the mass density.</p></td>
</tr>
<tr class="row-odd"><td><p>$thickness</p></td>
<td><p><em>float</em></p></td>
<td><p>the thickness in 2D problems.</p></td>
</tr>
<tr class="row-even"><td><p>$btype</p></td>
<td><p><em>string</em></p></td>
<td><p>a string defining the boundary type. See <strong>Note 2</strong></p></td>
</tr>
<tr class="row-odd"><td><p>-fx</p></td>
<td><p><em>string</em></p></td>
<td><p>optional flag. if provided, the user should provide the velocity time-series along the X direction.</p></td>
</tr>
<tr class="row-even"><td><p>$tsxTag</p></td>
<td><p><em>integer</em></p></td>
<td><p>optional, mandatory if -fx is provided. the tag of the time-series along the X direction.</p></td>
</tr>
<tr class="row-odd"><td><p>-fy</p></td>
<td><p><em>string</em></p></td>
<td><p>optional flag. if provided, the user should provide the velocity time-series along the Y direction.</p></td>
</tr>
<tr class="row-even"><td><p>$tsyTag</p></td>
<td><p><em>integer</em></p></td>
<td><p>optional, mandatory if -fy is provided. the tag of the time-series along the Y direction.</p></td>
</tr>
<tr class="row-odd"><td><p>-fz</p></td>
<td><p><em>string</em></p></td>
<td><p>optional flag. if provided, the user should provide the velocity time-series along the Z direction.</p></td>
</tr>
<tr class="row-even"><td><p>$tszTag</p></td>
<td><p><em>integer</em></p></td>
<td><p>optional, mandatory if -fz is provided. the tag of the time-series along the Z direction.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="theory">
<h2><span class="section-number">3.1.3.16.1. </span>Theory<a class="headerlink" href="#theory" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">When modelling a soil, only a portion of it is modelled, using artificial boundaries around it.
Fixed conditions at these artificial boundaries are fine in static problems, but in dynamic problems they will reflect outgoing propagating waves.
This problem can be avoided using a large portion of the model, which is impractical due to excessive computational efforts.
Another solution is to adopt special boundary conditions which are able to absorb outgoing waves.</div>
<div class="line">This element has been implemented following the work described in <a class="reference internal" href="#nielsen2006" id="id1"><span>[Nielsen2006]</span></a> for the 2D case, and properly extended for the 3D case.
For a detailed theory explanation, please refer to <a class="reference internal" href="#nielsen2006" id="id2"><span>[Nielsen2006]</span></a> and the references therein.</div>
<div class="line">In summary, this element can be seen as an assembly of many components:</div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><strong>F</strong>: The Free-Field element, required to compute the free-field solution in parallel with the main model.</p></li>
<li><p><strong>D</strong>: The Lysmer-Kuhlemeyer dashpots, required to absorb outgoing waves.</p></li>
<li><p><strong>T</strong>: The boundary tractions transferred from the Free-Field to the Soil domain, required to impose the free-field solution to the boundaries of the main model.</p></li>
</ul>
</div></blockquote>
<div class="align-center figure" id="id3">
<img alt="../../../../_images/ASDAbsorbingBoundary_Theory.png" src="../../../../_images/ASDAbsorbingBoundary_Theory.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.3.13 </span><span class="caption-text">Sketch of the absorbing (macro) element in 2D problems.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="usage-notes">
<h2><span class="section-number">3.1.3.16.2. </span>Usage Notes<a class="headerlink" href="#usage-notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition-note-1 admonition">
<p class="admonition-title">Note 1</p>
<p>The element should have the standard node-numbering to ensure a proper positive jacobian.</p>
<div class="align-center figure" id="id4">
<img alt="../../../../_images/ASDAbsorbingBoundary_Mesh.png" src="../../../../_images/ASDAbsorbingBoundary_Mesh.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.3.14 </span><span class="caption-text">Node numbering.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="admonition-note-2 admonition">
<p class="admonition-title">Note 2</p>
<p>The behavior of the element changes based on the side of the model it belongs to. The $btype argument defines the boundary type of the element.
It is a string made of a combination of characters. Each character describes a side of the model:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>B</strong> = Bottom</p></li>
<li><p><strong>L</strong> = Left</p></li>
<li><p><strong>R</strong> = Right</p></li>
<li><p><strong>F</strong> = Front (only for 3D problems)</p></li>
<li><p><strong>K</strong> = Back (only for 3D problems)</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">For a 2D problem you can have the following valid combinations: <strong>B</strong>, <strong>L</strong>, <strong>R</strong>, <strong>BL</strong>, <strong>BR</strong></div>
<div class="line">For a 3D problem you can have the following valid combinations: <strong>B</strong>, <strong>L</strong>, <strong>R</strong>, <strong>F</strong>, <strong>K</strong>, <strong>BL</strong>, <strong>BR</strong>, <strong>BF</strong>, <strong>BK</strong>, <strong>LF</strong>, <strong>LK</strong>, <strong>RF</strong>, <strong>RK</strong>, <strong>BLF</strong>, <strong>BLK</strong>, <strong>BRF</strong>, <strong>BRK</strong></div>
</div>
<div class="align-center figure" id="id5">
<img alt="../../../../_images/ASDAbsorbingBoundary_btype.png" src="../../../../_images/ASDAbsorbingBoundary_btype.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.3.15 </span><span class="caption-text">Exploded-view: Boundary Type Codes for 2D (left) and 3D (right) problems.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="admonition-note-3 admonition">
<p class="admonition-title">Note 3</p>
<div class="line-block">
<div class="line">The element works in two stages.</div>
<div class="line">In <strong>Stage 0</strong>, the element acts as a fix condition, suitable for the first gravity analysis. It stores the reactions and automatically converts them into applied boundary forces when switching from <strong>Stage 0</strong> to <strong>Stage 1</strong>.</div>
<div class="line">In <strong>Stage 1</strong>, the is converted into the real absorbing elements, and the reactions of the previous constraint element are applied as external forces.</div>
<div class="line">The conversion from <strong>Stage 0</strong> to <strong>Stage 1</strong> can be done with the <strong>setParameter</strong> command (See Example)</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p>The boundary elements should be an extrusion of the sides of the main model along their outward normal vector.</p></li>
<li><p>The vertical sides of the main model should have an outward normal vector that points either along the global (positive or negative) X direction or along the global (positive or negative) Y vector.</p></li>
<li><p>The bottom side of the main model should have an outward normal vector that points in the negative global Z direction.</p></li>
<li><p>In 3D models the sides L (left),R (right),F (front) and K (back) may have some natural distortion due to the topography. This is supported by the boundary element, but when the distortion along the Z direction is too large, the results can slightly deteriorate.</p></li>
</ul>
<div class="align-center figure" id="id6">
<img alt="../../../../_images/ASDAbsorbingBoundary_distortion.png" src="../../../../_images/ASDAbsorbingBoundary_distortion.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.3.16 </span><span class="caption-text">Exploded-view: Effects of Z-distortion in 3D problems.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<ol class="arabic simple">
<li><p><strong>Tcl Code</strong></p></li>
</ol>
<div class="line-block">
<div class="line">This is a small 2D example of a rectangular soil domain. The base input is a Ricker Wavelet.</div>
<div class="line">With these boundary elements you should be able to <strong>1) enforce the free-field solution</strong> on the soil domain and <strong>2) absorb outgoing waves</strong> generated when the primary wave hits the free-surface.</div>
<div class="line">This is the expected output: The blue line is the acceleration recorded at the base of the model. Point <strong>A</strong> and <strong>B</strong> represent respectively the wave entering the domain and the same wave exiting the domain after being reflected
by the free surface. Their peak value should be exactly 1g. The purple line is the acceleration recorded at the top of the model (on the free surface). Point <strong>C</strong> represents the wave hitting the free-surface. Its peak value should be exactly 2g.</div>
</div>
<div class="align-center figure">
<img alt="../../../../_images/ASDAbsorbingBoundary_result.png" src="../../../../_images/ASDAbsorbingBoundary_result.png" />
</div>
<div class="highlight-tcl notranslate"><div class="highlight"><pre><span></span><span class="c"># ===================================================</span>
<span class="c"># User parameters</span>
<span class="c"># ===================================================</span>
<span class="c"># material parameters</span>
<span class="k">set</span> E <span class="mf">3000000000.0</span>
<span class="k">set</span> poiss <span class="mf">0.3</span>
<span class="k">set</span> rho <span class="mf">2100.0</span>
<span class="k">set</span> thickness <span class="mf">1.0</span>
<span class="k">set</span> G <span class="k">[expr</span> <span class="nv">$E</span><span class="o">/</span><span class="k">(</span><span class="nv">2.0</span><span class="o">*</span><span class="k">(</span><span class="nv">1.0</span><span class="o">+</span><span class="nv">$poiss</span><span class="k">))]</span>
<span class="c"># domain size</span>
<span class="k">set</span> Lx <span class="mf">260.0</span>
<span class="k">set</span> Ly <span class="mf">140.0</span>
<span class="c"># mesh size</span>
<span class="k">set</span> hx <span class="mf">10.0</span>
<span class="k">set</span> hy <span class="mf">1.0</span>
<span class="c"># time increment</span>
<span class="k">set</span> dt <span class="mf">0.001</span>
<span class="c"># predominant frequency of the Ricker Wavelet</span>
<span class="k">set</span> freq <span class="mf">10.0</span>
<span class="c"># total duration of the dynamic analysis</span>
<span class="k">set</span> duration <span class="mf">1.0</span>

<span class="c"># builder</span>
<span class="nv">model</span> Basic <span class="o">-</span>ndm <span class="mi">2</span> <span class="o">-</span>ndf <span class="mi">2</span>

<span class="c"># time series</span>
<span class="c"># we want to apply a Ricker Wavelet with predominant frequency = 10 Hz.</span>
<span class="c"># It should be applied as velocity</span>
<span class="k">set</span> pi <span class="k">[expr</span> acos<span class="k">(</span><span class="nv">-1.0</span><span class="k">)]</span>
<span class="k">set</span> wl <span class="k">[expr</span> sqrt<span class="k">(</span><span class="nv">3.0</span><span class="o">/</span><span class="mf">2.0</span><span class="k">)</span><span class="o">/</span><span class="nv">$pi</span><span class="o">/</span><span class="nv">$freq</span><span class="o">*</span><span class="mf">10.0</span><span class="k">]</span>
<span class="k">set</span> ndiv <span class="k">[expr</span> int<span class="k">(</span><span class="nv">$wl</span><span class="o">/</span><span class="nv">$dt</span><span class="k">)]</span>
<span class="k">set</span> dt <span class="k">[expr</span> <span class="nv">$wl</span><span class="o">/</span><span class="nv">$ndiv.0</span><span class="k">]</span>
<span class="k">set</span> ts_vals <span class="k">{}</span>
<span class="k">for</span> <span class="k">{set</span> i <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$ndiv</span><span class="k">}</span> <span class="k">{</span><span class="nb">incr</span> i<span class="k">}</span> <span class="k">{</span>
    <span class="k">set</span> ix <span class="k">[expr</span> <span class="nv">$i.0</span><span class="o">*</span><span class="nv">$dt-$wl</span><span class="o">/</span><span class="mf">2.0</span><span class="k">]</span>
    <span class="k">set</span> iy <span class="k">[expr</span> <span class="nv">$ix</span><span class="o">*</span>exp<span class="k">(</span><span class="nv">-$pi</span><span class="o">*</span><span class="nv">$pi</span><span class="o">*</span><span class="nv">$freq</span><span class="o">*</span><span class="nv">$freq</span><span class="o">*</span><span class="nv">$ix</span><span class="o">*</span><span class="nv">$ix</span><span class="k">)]</span>
    <span class="nb">lappend</span> ts_vals <span class="nv">$iy</span>
<span class="k">}</span>
<span class="k">set</span> tsX <span class="mi">1</span>
<span class="nv">timeSeries</span> Path <span class="nv">$tsX</span> <span class="o">-</span>dt <span class="nv">$dt</span> <span class="o">-</span>values <span class="nv">$ts_vals</span>  <span class="o">-</span>factor <span class="mf">9.806</span>

<span class="c"># material</span>
<span class="k">set</span> matTag <span class="mi">1</span>
<span class="nv">nDMaterial</span> ElasticIsotropic <span class="nv">$matTag</span> <span class="nv">$E</span> <span class="nv">$poiss</span> <span class="nv">$rho</span>

<span class="c"># Define nodes on a regular grid with sizes hx-hy.</span>
<span class="c"># For a more clear visualization we set the size of the absorbing elements larger.</span>
<span class="c"># (note: the size of this element does not influence the results. The only constraint is that it</span>
<span class="c"># should have a non-zero size!)</span>
<span class="k">set</span> ndivx <span class="k">[expr</span> int<span class="k">(</span><span class="nv">$Lx</span><span class="o">/</span><span class="nv">$hx</span><span class="k">)</span> <span class="o">+</span> <span class="mi">2</span><span class="k">];</span> <span class="c"># add 2 layers of absorbing elements (left and right)</span>
<span class="k">set</span> ndivy <span class="k">[expr</span> int<span class="k">(</span><span class="nv">$Ly</span><span class="o">/</span><span class="nv">$hy</span><span class="k">)</span> <span class="o">+</span> <span class="mi">1</span><span class="k">];</span> <span class="c"># add 1 layer of absorbing elements (bottom)</span>
<span class="k">set</span> abs_h <span class="k">[expr</span> <span class="nv">$hx</span><span class="o">*</span><span class="mf">2.0</span><span class="k">]</span>
<span class="k">for</span> <span class="k">{set</span> j <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$j</span> <span class="o">&lt;=</span> <span class="nv">$ndivy</span><span class="k">}</span> <span class="k">{</span><span class="nb">incr</span> j<span class="k">}</span> <span class="k">{</span>
    <span class="k">if</span> <span class="k">{</span><span class="nv">$j</span> <span class="o">==</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{set</span> y <span class="k">[expr</span> <span class="o">-</span><span class="nv">$abs_h</span><span class="k">]}</span> <span class="k">else</span> <span class="k">{set</span> y <span class="k">[expr</span> <span class="k">(</span><span class="nv">$j-1</span><span class="k">)</span> <span class="o">*</span> <span class="nv">$hy</span><span class="k">]}</span>
    <span class="k">for</span> <span class="k">{set</span> i <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">&lt;=</span> <span class="k">[expr</span> <span class="nv">$ndivx</span><span class="k">]}</span> <span class="k">{</span><span class="nb">incr</span> i<span class="k">}</span> <span class="k">{</span>
        <span class="k">if</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">==</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{set</span> x <span class="k">[expr</span> <span class="o">-</span><span class="nv">$abs_h</span><span class="k">]}</span> <span class="k">elseif</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">==</span> <span class="k">[expr</span> <span class="nv">$ndivx</span><span class="k">]}</span> <span class="k">{set</span> x <span class="k">[expr</span> <span class="nv">$Lx</span><span class="o">+</span><span class="nv">$abs_h</span><span class="k">]}</span> <span class="k">else</span> <span class="k">{set</span> x <span class="k">[expr</span> <span class="k">(</span><span class="nv">$i-1</span><span class="k">)</span> <span class="o">*</span> <span class="nv">$hx</span><span class="k">]}</span>
        <span class="nv">node</span> <span class="k">[expr</span> <span class="nv">$j</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">+</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span> <span class="k">[expr</span> <span class="nv">$x-$Lx</span><span class="o">/</span><span class="mf">2.0</span><span class="k">]</span> <span class="nv">$y</span>
    <span class="k">}</span>
<span class="k">}</span>

<span class="c"># Define elements.</span>
<span class="c"># Save absorbing elements tags in a list</span>
<span class="k">set</span> abs_elements <span class="k">{}</span>
<span class="k">for</span> <span class="k">{set</span> j <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$j</span> <span class="o">&lt;</span> <span class="nv">$ndivy</span><span class="k">}</span> <span class="k">{</span><span class="nb">incr</span> j<span class="k">}</span> <span class="k">{</span>
    <span class="c"># Yflag</span>
    <span class="k">if</span> <span class="k">{</span><span class="nv">$j</span> <span class="o">==</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{set</span> Yflag <span class="s2">&quot;B&quot;</span><span class="k">}</span> <span class="k">else</span> <span class="k">{set</span> Yflag <span class="s2">&quot;&quot;</span><span class="k">}</span>
    <span class="k">for</span> <span class="k">{set</span> i <span class="mi">0</span><span class="k">}</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="k">[expr</span> <span class="nv">$ndivx</span><span class="k">]}</span> <span class="k">{</span><span class="nb">incr</span> i<span class="k">}</span> <span class="k">{</span>
        <span class="c"># Tags</span>
        <span class="k">set</span> Etag <span class="k">[expr</span> <span class="nv">$j</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="k">)</span><span class="o">+</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
        <span class="k">set</span> N1 <span class="k">[expr</span> <span class="nv">$j</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">+</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
        <span class="k">set</span> N2 <span class="k">[expr</span> <span class="nv">$N1</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
        <span class="k">set</span> N4 <span class="k">[expr</span> <span class="k">(</span><span class="nv">$j</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">+</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
        <span class="k">set</span> N3 <span class="k">[expr</span> <span class="nv">$N4</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
        <span class="c"># Xflag</span>
        <span class="k">if</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">==</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{set</span> Xflag <span class="s2">&quot;L&quot;</span><span class="k">}</span> <span class="k">elseif</span> <span class="k">{</span><span class="nv">$i</span> <span class="o">==</span> <span class="k">[expr</span> <span class="nv">$ndivx-1</span><span class="k">]}</span> <span class="k">{set</span> Xflag <span class="s2">&quot;R&quot;</span><span class="k">}</span> <span class="k">else</span> <span class="k">{set</span> Xflag <span class="s2">&quot;&quot;</span><span class="k">}</span>
        <span class="k">set</span> btype <span class="s2">&quot;$Xflag$Yflag&quot;</span>
        <span class="k">if</span> <span class="k">{</span><span class="nv">$btype</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="k">}</span> <span class="k">{</span>
            <span class="c"># absorbing element</span>
            <span class="nb">lappend</span> abs_elements <span class="nv">$Etag</span>
            <span class="k">if</span> <span class="k">{</span><span class="nv">$Yflag</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="k">}</span> <span class="k">{</span>
                <span class="c"># bottom element</span>
                <span class="nv">element</span> ASDAbsorbingBoundary2D <span class="nv">$Etag</span> <span class="nv">$N1</span> <span class="nv">$N2</span> <span class="nv">$N3</span> <span class="nv">$N4</span> <span class="nv">$G</span> <span class="nv">$poiss</span> <span class="nv">$rho</span> <span class="nv">$thickness</span> <span class="nv">$btype</span> <span class="o">-</span>fx <span class="nv">$tsX</span>
            <span class="k">}</span> <span class="k">else</span> <span class="k">{</span>
                <span class="c"># vertical element</span>
                <span class="nv">element</span> ASDAbsorbingBoundary2D <span class="nv">$Etag</span> <span class="nv">$N1</span> <span class="nv">$N2</span> <span class="nv">$N3</span> <span class="nv">$N4</span> <span class="nv">$G</span> <span class="nv">$poiss</span> <span class="nv">$rho</span> <span class="nv">$thickness</span> <span class="nv">$btype</span>
            <span class="k">}</span>
        <span class="k">}</span> <span class="k">else</span> <span class="k">{</span>
            <span class="c"># soil element</span>
            <span class="nv">element</span> quad <span class="nv">$Etag</span> <span class="nv">$N1</span> <span class="nv">$N2</span> <span class="nv">$N3</span> <span class="nv">$N4</span> <span class="nv">$thickness</span> PlaneStrain <span class="nv">$matTag</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="k">[expr</span> <span class="o">-</span><span class="mf">9.806</span><span class="o">*</span><span class="nv">$rho</span><span class="k">]</span>
        <span class="k">}</span>
    <span class="k">}</span>
<span class="k">}</span>

<span class="c"># Static analysis (or quasti static)</span>
<span class="c"># The absorbing boundaries now are in STAGE 0, so they act as constraints</span>
<span class="nv">constraints</span> Transformation
<span class="nv">numberer</span> RCM
<span class="nv">system</span> UmfPack
<span class="nv">test</span> NormUnbalance <span class="mf">0.0001</span> <span class="mi">10</span> <span class="mi">1</span>
<span class="nv">algorithm</span> Newton
<span class="nv">integrator</span> LoadControl <span class="mf">1.0</span>
<span class="nv">analysis</span> Static
<span class="k">set</span> ok <span class="k">[</span><span class="nv">analyze</span> <span class="mi">1</span><span class="k">]</span>
<span class="k">if</span> <span class="k">{</span><span class="nv">$ok</span> <span class="o">!=</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{</span>
    <span class="k">error</span> <span class="s2">&quot;Gravity analysis failed&quot;</span>
<span class="k">}</span>
<span class="nv">loadConst</span> <span class="o">-</span>time <span class="mf">0.0</span>
<span class="nv">wipeAnalysis</span>

<span class="c"># update absorbing elements to STAGE 1 (absorbing)</span>
<span class="nv">setParameter</span> <span class="o">-</span>val <span class="mi">1</span> <span class="o">-</span>ele <span class="k">{</span><span class="o">*</span><span class="k">}</span><span class="nv">$abs_elements</span> stage

<span class="c"># recorders</span>
<span class="k">set</span> soil_base <span class="k">[expr</span> <span class="mi">1</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">+</span>int<span class="k">(</span><span class="nv">$ndivx</span><span class="o">/</span><span class="nv">2</span><span class="k">)</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
<span class="k">set</span> soil_top <span class="k">[expr</span> <span class="nv">$ndivy</span><span class="o">*</span><span class="k">(</span><span class="nv">$ndivx</span><span class="o">+</span><span class="nv">1</span><span class="k">)</span><span class="o">+</span>int<span class="k">(</span><span class="nv">$ndivx</span><span class="o">/</span><span class="nv">2</span><span class="k">)</span><span class="o">+</span><span class="mi">1</span><span class="k">]</span>
<span class="nv">recorder</span> Node <span class="o">-</span>file <span class="s2">&quot;soil_base.txt&quot;</span> <span class="o">-</span>time <span class="o">-</span>node <span class="nv">$soil_base</span> <span class="o">-</span>dof <span class="mi">1</span> accel
<span class="nv">recorder</span> Node <span class="o">-</span>file <span class="s2">&quot;soil_top.txt&quot;</span> <span class="o">-</span>time <span class="o">-</span>node <span class="nv">$soil_top</span> <span class="o">-</span>dof <span class="mi">1</span> accel

<span class="c"># Dynamic analysis</span>
<span class="c"># The absorbing boundaries now are in STAGE 0, so they act as constraints</span>
<span class="nv">constraints</span> Transformation
<span class="nv">numberer</span> RCM
<span class="nv">system</span> UmfPack
<span class="nv">test</span> NormUnbalance <span class="mf">0.0001</span> <span class="mi">10</span> <span class="mi">1</span>
<span class="nv">algorithm</span> Newton
<span class="nv">integrator</span> TRBDF2
<span class="nv">analysis</span> Transient
<span class="k">set</span> nsteps <span class="k">[expr</span> int<span class="k">(</span><span class="nv">$duration</span><span class="o">/</span><span class="nv">$dt</span><span class="k">)]</span>
<span class="k">set</span> dt <span class="k">[expr</span> <span class="nv">$duration</span><span class="o">/</span><span class="nv">$nsteps.0</span><span class="k">]</span>
<span class="k">set</span> ok <span class="k">[</span><span class="nv">analyze</span> <span class="nv">$nsteps</span> <span class="nv">$dt</span><span class="k">]</span>
<span class="k">if</span> <span class="k">{</span><span class="nv">$ok</span> <span class="o">!=</span> <span class="nv">0</span><span class="k">}</span> <span class="k">{</span>
    <span class="k">error</span> <span class="s2">&quot;Dynamic analysis failed&quot;</span>
<span class="k">}</span>
</pre></div>
</div>
</div>
<p>Code Developed by: <strong>Massimo Petracca</strong> at ASDEA Software, Italy.</p>
<dl class="citation">
<dt class="label" id="nielsen2006"><span class="brackets">Nielsen2006</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>)</span></dt>
<dd><div class="line-block">
<div class="line">Nielsen, Andreas H. “Absorbing boundary conditions for seismic analysis in ABAQUS.” ABAQUS users’ conference. 2006.. (<a class="reference external" href="https://www.researchgate.net/profile/Sahand-Jabini-Asli-2/post/How_can_i_define_Absorbing_boundary_in_ABAQUS_EXPLICIT2/attachment/59d634b679197b80779925d8/AS%3A380916271730688%401467828924106/download/architecture_absorbing_auc06_babtie.pdf">Link to article</a>)</div>
</div>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-2431545-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>